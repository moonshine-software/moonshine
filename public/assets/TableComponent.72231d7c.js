var be=Object.defineProperty;var ge=(e,n,t)=>n in e?be(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var C=(e,n,t)=>(ge(e,typeof n!="symbol"?n+"":n,t),t);import{d as x,p as ye,q,s as K,o as a,c as d,g as f,a as m,v as R,x as j,F as O,r as B,y as U,t as V,u as _,z as T,A as L,B as N,D as $e,E as M,e as v,G as z,H as de,h as E,w as g,T as H,I as X,J as we,_ as J,n as I,b as Q,C as ke,i as Ce,K as xe,L as Te,M as Se,N as je,O as Ie,f as te}from"./main.53808d6f.js";import{F as De,f as Oe}from"./view.2c3d720f.js";const Ve={class:"m-paginator"},Ae={key:0,class:"m-paginator__items-wrapper"},Be=["onClick","textContent"],Ee={class:"m-paginator__resource-info"},Pe=x({__name:"Paginator",props:{data:null},emits:["page:change"],setup(e,{emit:n}){const t=e,s=ye(),{t:r}=q(),l=c=>{if(!c.number||c.active)return;const p={number:c.number};n("page:change",p)},o=()=>{t.data.current_page>1&&n("page:change",{number:t.data.current_page-1})},i=()=>{t.data.current_page<t.data.last_page&&n("page:change",{number:t.data.current_page+1})},$=c=>({"m-paginator__item--active":c.active,"m-paginator__item--disabled":!c.number}),w=K(()=>s.theme.isSmallDevice?1:4),A=K(()=>{const c=t.data.last_page,p=t.data.current_page,u=p-w.value,y=p+w.value+1,D=[];for(let b=1;b<=c;b++)(b===1||b===c||b>=u&&b<y)&&D.push({number:b,active:b===p,label:String(b)}),c>w.value*2&&(b===2&&u>2||b===c-1&&y<c-1)&&D.push({number:null,active:!1,label:"..."});return D}),k=K(()=>({from:t.data.from,to:t.data.to,total:t.data.total,per_page:t.data.per_page>t.data.total?t.data.total:t.data.per_page}));return(c,p)=>(a(),d("section",Ve,[e.data.last_page>1?(a(),d("ul",Ae,[f("li",{onClick:o,class:j(["m-paginator__item px-2",{"m-paginator__item--disabled":e.data.current_page<2}])},[m(R,{icon:"chevron-left",class:"w-4 h-4"})],2),(a(!0),d(O,null,B(_(A),(u,y)=>(a(),d("li",{key:`paginator-link-${u.label}-${y}`,class:j(["m-paginator__item",$(u)]),onClick:U(D=>l(u),["stop"]),textContent:V(u.label)},null,10,Be))),128)),f("li",{onClick:i,class:j(["m-paginator__item px-2",{"m-paginator__item--disabled":e.data.current_page===e.data.last_page}])},[m(R,{icon:"chevron-right",class:"w-4 h-4"})],2)])):T("",!0),f("p",Ee,V(_(r)("ui.pagination.shown",_(k))),1)]))}});function Fe(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var _e=Fe,Ke=typeof L=="object"&&L&&L.Object===Object&&L,Me=Ke,Ne=Me,Le=typeof self=="object"&&self&&self.Object===Object&&self,Re=Ne||Le||Function("return this")(),me=Re,qe=me,Ge=function(){return qe.Date.now()},We=Ge,ze=/\s/;function Ue(e){for(var n=e.length;n--&&ze.test(e.charAt(n)););return n}var He=Ue,Xe=He,Je=/^\s+/;function Qe(e){return e&&e.slice(0,Xe(e)+1).replace(Je,"")}var Ye=Qe,Ze=me,et=Ze.Symbol,fe=et,ne=fe,pe=Object.prototype,tt=pe.hasOwnProperty,nt=pe.toString,F=ne?ne.toStringTag:void 0;function st(e){var n=tt.call(e,F),t=e[F];try{e[F]=void 0;var s=!0}catch{}var r=nt.call(e);return s&&(n?e[F]=t:delete e[F]),r}var at=st,ot=Object.prototype,rt=ot.toString;function lt(e){return rt.call(e)}var it=lt,se=fe,ct=at,ut=it,dt="[object Null]",_t="[object Undefined]",ae=se?se.toStringTag:void 0;function mt(e){return e==null?e===void 0?_t:dt:ae&&ae in Object(e)?ct(e):ut(e)}var ft=mt;function pt(e){return e!=null&&typeof e=="object"}var ht=pt,vt=ft,bt=ht,gt="[object Symbol]";function yt(e){return typeof e=="symbol"||bt(e)&&vt(e)==gt}var $t=yt,wt=Ye,oe=_e,kt=$t,re=0/0,Ct=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,Tt=/^0o[0-7]+$/i,St=parseInt;function jt(e){if(typeof e=="number")return e;if(kt(e))return re;if(oe(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=oe(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=wt(e);var t=xt.test(e);return t||Tt.test(e)?St(e.slice(2),t?2:8):Ct.test(e)?re:+e}var It=jt,Dt=_e,W=We,le=It,Ot="Expected a function",Vt=Math.max,At=Math.min;function Bt(e,n,t){var s,r,l,o,i,$,w=0,A=!1,k=!1,c=!0;if(typeof e!="function")throw new TypeError(Ot);n=le(n)||0,Dt(t)&&(A=!!t.leading,k="maxWait"in t,l=k?Vt(le(t.maxWait)||0,n):l,c="trailing"in t?!!t.trailing:c);function p(h){var S=s,P=r;return s=r=void 0,w=h,o=e.apply(P,S),o}function u(h){return w=h,i=setTimeout(b,n),A?p(h):o}function y(h){var S=h-$,P=h-w,ee=n-S;return k?At(ee,l-P):ee}function D(h){var S=h-$,P=h-w;return $===void 0||S>=n||S<0||k&&P>=l}function b(){var h=W();if(D(h))return Z(h);i=setTimeout(b,y(h))}function Z(h){return i=void 0,c&&s?p(h):(s=r=void 0,o)}function he(){i!==void 0&&clearTimeout(i),w=0,s=$=r=i=void 0}function ve(){return i===void 0?o:Z(W())}function G(){var h=W(),S=D(h);if(s=arguments,r=this,$=h,S){if(i===void 0)return u($);if(k)return clearTimeout(i),i=setTimeout(b,n),p($)}return i===void 0&&(i=setTimeout(b,n)),o}return G.cancel=he,G.flush=ve,G}var Et=Bt;const Pt=Et,Ft={class:"relative flex items-center"},Kt=x({__name:"SearchInput",props:{modelValue:null,debounce:{default:500}},emits:["update:modelValue"],setup(e,{emit:n}){const t=e,{t:s}=q(),r=Pt(l=>{n("update:modelValue",l.target.value)},t.debounce);return(l,o)=>(a(),d("div",Ft,[m(R,{icon:"magnifying-glass",class:"text-secondary-400 absolute left-2"}),m($e,N({class:"pl-9 sm",id:"shine-search",name:"shine-search"},l.$attrs,{autocomplete:"off",placeholder:_(s)("ui.search"),"model-value":e.modelValue,onInput:o[0]||(o[0]=i=>_(r)(i))}),null,16,["placeholder","model-value"])]))}}),Mt=["onKeydown"],Nt=["onKeydown"],Lt=["onClick"],Rt=x({__name:"TheDropdown",setup(e){const n=M(!1),t=()=>n.value=!1,s=()=>n.value=!0;return(r,l)=>(a(),d("div",{class:"m-dropdown",onKeydown:z(t,["esc"])},[(a(),v(de,{to:"body"},[n.value?(a(),d("div",{key:0,class:"m-dropdown__close-area",onKeydown:z(t,["esc"]),onClick:t},null,40,Nt)):T("",!0)])),f("div",{onClick:U(s,["prevent"])},[E(r.$slots,"trigger")],8,Lt),m(X,null,{default:g(()=>[n.value?(a(),v(H,{key:0,class:"m-dropdown__modal"},{default:g(()=>[E(r.$slots,"default")]),_:3})):T("",!0)]),_:3})],40,Mt))}});const qt={class:"m-checkbox__label"},Gt={inheritAttrs:!1},Wt=x({...Gt,__name:"TheCheckbox",props:{modelValue:{type:Boolean}},setup(e){const n=we();return(t,s)=>(a(),d("label",qt,[f("input",N({type:"checkbox",class:"m-checkbox"},_(n)),null,16),f("span",null,[E(t.$slots,"default",{},void 0,!0)])]))}});const zt=J(Wt,[["__scopeId","data-v-0d7e7454"]]),Ut=x({__name:"ColumnsFilter",props:{columns:null},setup(e){return q(),(n,t)=>(a(),v(Rt,null,{trigger:g(()=>[m(I,{icon:"view-columns",secondary:"",square:"",brand:"",sm:""})]),default:g(()=>[(a(!0),d(O,null,B(e.columns,s=>(a(),v(zt,{value:s.label,checked:s.visible,onChange:r=>s.switchVisible()},{default:g(()=>[Q(V(s.label),1)]),_:2},1032,["value","checked","onChange"]))),256))]),_:1}))}});class Y{constructor(n){C(this,"key");C(this,"label");C(this,"sortDirection");C(this,"sortable");C(this,"visible",!0);new ke(n,this).apply()}switchVisible(){this.visible=!this.visible}switchDirection(){this.sortDirection=this.sortDirection==="ASC"?"DESC":"ASC"}static getColumnsFromFields(n,t=!1,s){const r=[];return n.forEach(l=>{var o;r.push(new Y({key:l.key,label:(o=l.label)!=null?o:l.key,sortable:t,sortDirection:s,visible:!0}))}),r}}class Ht{constructor(n){C(this,"fields",[]);C(this,"selected",!1);C(this,"selectable",!0);C(this,"policies");C(this,"id");const{fields:t,selectable:s,id:r,policies:l}=n;this.id=r,t==null||t.forEach(o=>this.fields.push(new De(o))),this.selectable=s!=null?s:!1,this.policies=l}setSelected(n=!0){this.selected=n}isSelected(){return this.selected}getVisibleFields(n){return this.fields.filter(t=>n.includes(t.key))}getID(){return`row-${this.id}`}}const ie=e=>Ce(e,{state:()=>({title:void 0,endpoint:"",attributes:{},columns:[],rows:[],paginator:void 0,selectedRows:[],allRowsSelected:!1,loaded:!1,fetching:!1,search:"",sort:{column:void 0,direction:void 0}}),getters:{visibleColumns:n=>n.columns.filter(t=>t.visible),visibleFields(){return this.visibleColumns.map(n=>n.key)},isSelectable:()=>!1,currentPage:n=>{var t;return((t=n.paginator)==null?void 0:t.current_page)||1}},actions:{setTable(n){const{rows:t,columns:s,...r}=n;this.columns=[],s==null||s.forEach(l=>this.columns.push(new Y(l))),this.rows=[],t==null||t.forEach(l=>{this.rows.push(new Ht(l))}),Object.assign(this.$state,r),this.loaded=!0},switchSort(n){const t=this.columns.find(s=>s.key===n);t&&(this.sort.direction=t.sortDirection==="ASC"?"DESC":"ASC",this.sort.column=n)},fetch(n,t,s,r){this.fetching=!0,Oe(n,t,s,null,{page:r}).then(l=>{this.setTable(l.data),this.fetching=!1})},reset(){this.$reset()}}}),ce={};function Xt(e){return e=`index-table-${e}`,ce[e]||(ce[e]=ie(e)),ie(e)()}const Jt={class:"m-hidden-select__wrapper"},Qt=["value"],Yt=["value"],Zt={inheritAttrs:!1},en=x({...Zt,__name:"TheHiddenSelect",props:{modelValue:null,options:null},setup(e){return(n,t)=>(a(),d("div",Jt,[E(n.$slots,"default"),f("select",N(n.$attrs,{value:e.modelValue,onChange:t[0]||(t[0]=s=>n.$emit("update:modelValue",s.target.value)),class:"m-hidden-select"}),[(a(!0),d(O,null,B(e.options,s=>{var r,l,o;return a(),d("option",{key:`m-h-s-${(r=s.label)!=null?r:s}`,value:(l=s.value)!=null?l:s},V((o=s.label)!=null?o:s),9,Yt)}),128))],16,Qt)]))}});const tn={__name:"EditButton",setup(e){return(n,t)=>(a(),v(I,{square:"",brand:"",xs:"",icon:"pencil-square"}))}},nn=tn,sn={__name:"DeleteButton",setup(e){return(n,t)=>(a(),v(I,{square:"",danger:"",xs:"",icon:"trash"}))}},an=sn,on={__name:"ViewButton",setup(e){return(n,t)=>(a(),v(I,{square:"",secondary:"",xs:"",icon:"eye"}))}},rn=on,ln=["onKeydown","onClick"],cn={inheritAttrs:!1},un=x({...cn,__name:"TheModal",props:{show:{type:Boolean},position:null},emits:["update:show"],setup(e,{emit:n}){const t=()=>{n("update:show",!1)};return(s,r)=>(a(),v(X,null,{default:g(()=>[(a(),v(de,{to:"body"},[e.show?(a(),d("div",{key:0,class:j([{"m-modal__wrapper--center":e.position==="center"},"m-modal__wrapper"]),onKeydown:z(t,["esc"]),onClick:U(t,["self"])},[m(H,N({class:"m-modal"},s.$attrs),{default:g(()=>[E(s.$slots,"default")]),_:3},16)],42,ln)):T("",!0)]))]),_:3}))}});const dn={class:"m-delete-conf-modal__icon"},_n=f("p",{class:"m-delete-conf-modal__text"}," Are you sure to delete this item? ",-1),mn={class:"flex gap-2"},fn=x({__name:"DeleteConfirmationModal",props:{closeOnDelete:{type:Boolean},onConfirm:null},emits:["delete"],setup(e,{emit:n}){const t=M(!1),s=M(!1),r=()=>{n("delete"),s.value=!1,t.value=!1};return(l,o)=>(a(),d(O,null,[f("div",N({onClick:o[0]||(o[0]=i=>t.value=!0)},l.$attrs),[E(l.$slots,"trigger")],16),m(un,{show:t.value,"onUpdate:show":o[3]||(o[3]=i=>t.value=i),position:"center",class:"m-delete-conf-modal"},{default:g(()=>[f("div",dn,[m(R,{icon:"trash",class:j(["w-10 h-10",{"m-delete-conf-modal__icon--loading":s.value}])},null,8,["class"])]),_n,f("div",mn,[m(I,{onClick:o[1]||(o[1]=i=>t.value=!1),secondary:"",class:"w-full"},{default:g(()=>[Q(" Cancel ")]),_:1}),m(xe,{default:{label:"Delete",danger:!0,icon:"trash"},action:e.onConfirm,"onAction:start":o[2]||(o[2]=i=>s.value=!0),"onAfterDelay:success":r},null,8,["action"])])]),_:1},8,["show"])],64))}});const pn={class:"space-x-2"},hn=x({__name:"ActionsCell",props:{resourceId:null},setup(e){const n=e,t=Te(),s=t.uri,r=()=>t.delete(n.resourceId);return(l,o)=>{const i=Se("router-link");return a(),d("td",pn,[m(i,{to:{name:"show",params:{resourceName:_(s),resourceId:e.resourceId}},tabindex:"-1",class:"inline-block"},{default:g(()=>[m(rn)]),_:1},8,["to"]),m(i,{to:{name:"edit",params:{resourceName:_(s),resourceId:e.resourceId}},tabindex:"-1",class:"inline-block"},{default:g(()=>[m(nn)]),_:1},8,["to"]),m(fn,{"on-confirm":r,"close-on-delete":"",class:"inline-block"},{trigger:g(()=>[m(an,{class:"inline-block"})]),_:1})])}}});const vn={},bn={class:"table-loader"};function gn(e,n){return a(),d("div",bn)}const yn=J(vn,[["render",gn],["__scopeId","data-v-1a6ee299"]]);function ue(e,n){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[f("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}const $n=x({__name:"ColumnSortIcon",props:{direction:null},setup(e){return(n,t)=>e.direction==="ASC"?(a(),v(_(ue),{key:0,class:"w-6 h-6 inline-block"})):(a(),v(_(ue),{key:1,class:"w-6 h-6 rotate-180 inline-block"}))}}),wn={class:"space-y-4"},kn={class:"flex justify-between items-start"},Cn={class:"flex justify-between items-center"},xn={class:"flex gap-2 justify-end items-center w-full"},Tn={key:0},Sn=["onClick"],jn=x({__name:"TableComponent",props:{resourceKey:null,viewKey:null,viewComponentKey:null},setup(e){const n=e,t=Xt(n.resourceKey),s=M("sm"),{t:r}=q(),l=[{value:"xs",label:r("ui.extra-small")},{value:"sm",label:r("ui.small")},{value:"base",label:r("ui.normal")},{value:"lg",label:r("ui.big")}],o=M(!1),i=(c=1)=>t.fetch(n.resourceKey,n.viewKey,n.viewComponentKey,c),$=c=>{t.switchSort(c),i(t.currentPage)},w=K(()=>o.value?"section":H),A=c=>i(c.number),k=K({get:()=>t.search,set:c=>{t.search=c,i(1)}});return i(),(c,p)=>(a(),d("div",wn,[f("header",kn,[m(je,null,{default:g(()=>[Q(V(_(t).title),1)]),_:1})]),f("section",Cn,[m(Kt,{modelValue:_(k),"onUpdate:modelValue":p[0]||(p[0]=u=>Ie(k)?k.value=u:null)},null,8,["modelValue"]),f("div",xn,[o.value?(a(),v(I,{key:0,icon:"view-columns",onClick:p[1]||(p[1]=u=>o.value=!1),square:"",sm:"",secondary:""})):(a(),v(I,{key:1,icon:"squares-2X2",onClick:p[2]||(p[2]=u=>o.value=!0),square:"",sm:"",secondary:""})),m(en,{options:l,modelValue:s.value,"onUpdate:modelValue":p[3]||(p[3]=u=>s.value=u)},{default:g(()=>[m(I,{icon:"adjustments-vertical",square:"",sm:"",secondary:""})]),_:1},8,["modelValue"]),_(t).columns?(a(),v(Ut,{key:2,columns:_(t).visibleColumns},null,8,["columns"])):T("",!0)])]),(a(),v(te(_(w)),null,{default:g(()=>[m(X,{mode:"out-in"},{default:g(()=>[_(t).loaded?(a(),d("div",{class:j({"m-table__wrapper":!o.value}),key:_(t).paginator.current_page},[f("table",{class:j([`m-table-${s.value}`,{"m-card-table":o.value,"m-table":!o.value}])},[o.value?T("",!0):(a(),d("thead",Tn,[f("tr",null,[(a(!0),d(O,null,B(_(t).columns,u=>(a(),d("th",{onClick:y=>$(u.key),key:`th-${u.key}`},[f("span",null,V(u.label),1),u.sortable?(a(),v($n,{key:0,direction:u.sortDirection},null,8,["direction"])):T("",!0)],8,Sn))),128)),f("th",null,V(_(r)("ui.actions")),1)])])),f("tbody",null,[(a(!0),d(O,null,B(_(t).rows,u=>(a(),d("tr",{key:`row-${u.id}`},[(a(!0),d(O,null,B(u.getVisibleFields(_(t).visibleFields),y=>(a(),d("td",{key:`cell-${u.id}-${y.key}`},[(a(),v(te(o.value?y.getViewComponent():y.getIndexComponent()),{field:y},null,8,["field"]))]))),128)),m(hn,{"resource-id":u.id},null,8,["resource-id"])]))),128))])],2)],2)):T("",!0)]),_:1}),m(yn,{class:j({"opacity-100":_(t).fetching})},null,8,["class"]),_(t).paginator?(a(),v(Pe,{key:0,class:"mt-4",data:_(t).paginator,"onPage:change":A},null,8,["data"])):T("",!0)]),_:1}))]))}});const Vn=J(jn,[["__scopeId","data-v-cc2194c8"]]);export{Vn as default};
